{% extends "base.html" %}

{% block content %}
{% load staticfiles%}
{% load humanize %}
{% load avatar_tags %}

<div ng-app="exposureIndexApp" ng-controller="exposureIndexCtrl">

	<div class="container-fluid" >

		<div class="row">
			<div class="col-md-6">
				<ul class="breadcrumb">
				  	<li><a href="{% url 'eng_models_home' %}">Models</a></li>
				  	<li class="active">Exposure</li>
				</ul>
			</div>
		</div>

		<div class="row" style="height:80vh;">
			<div class="col-md-3">

				<div class="row">
					<div class="col-md-12">
						<a href="{% url 'add_exposure_model' %}"> <button class="btn btn-info" style="width: 100%;"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> New Model </button></a>
					</div>
				</div>
				<br>


				{% if models %}

				<div class="row" style="height:80vh; overflow-y: auto;">

					{% for model in models %}
					<div class="col-md-12">

						<div class="well">
							<div class="row">
									<div class="col-md-12">

										<p><a href="{% url 'profile' model.author.id %}"> {% if model.author|has_avatar %} {% avatar model.author 30 %} {% else %} <img style="height:30px;" src="{% static 'img/default-avatar.jpg' %}"> {% endif %} </a> <a href="{% url 'profile' model.author.id %}"> {{ model.author.first_name }} {{ model.author.last_name }} </a></p>

										{% if model.contributors.all %}<p>{{ model.contributors.all|length }} {% if model.contributors.all|length == 1 %} contributor: {% else %} contributors: {% endif %} {% for con in model.contributors.all %} <a href="{% url 'profile' con.id %}"> {% if con|has_avatar %} {% avatar con 30 %} {% else %} <img style="height:30px;" src="{% static 'img/default-avatar.jpg' %}" > {% endif %} </a> {% endfor %}</p>{% endif %}

										<p class="text-muted">
											{% if model.date_created|naturalday == 'today' %}
												{{ model.date_created|naturaltime }}
											{% else %}
												{{ model.date_created|naturalday }}
											{% endif %}
										</p>
										<h3> <a href="{% url 'detail_exposure' model.id %}">{{ model.name }}</a> </h3>
										<p>{{ model.description }}</p>


									</div>
							</div>
						</div>

					</div>
					{% endfor %}


				</div>

				{% else %}
					<br>
					<div class="row">
						<div class="col-md-12">
							<div class="alert alert-dismissable alert-info">
							<button type="button" class="close" data-dismiss="alert">Ã—</button>
						    	<p>No models are available. Please add the first</p>
						    </div>
						</div>
					</div>
				{% endif %}
			</div>
			<div class="col-md-9">
				<div id="map" style="height:90vh;"></div>
			</div>
		</div>
	</div>

</div>

{% load staticfiles %}
<script type="text/javascript" src="{% static 'eng_models/js/exposureIndex.js' %}"></script>

{% endblock %}
